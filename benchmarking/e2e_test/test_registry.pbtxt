benchmarks {
  name: "e2e_python_benchmark_summary_v1"
  description: "A test benchmark for a Python-based project using TF 1.x Summary for logging metrics."
  owner: "e2e-test-team"
  workload {
    # Must start with ./ml_actions because of the checkout path
    # in our reusable workflow.
    action: "./ml_actions/benchmarking/actions/workload_executors/python"
    action_inputs { key: "script_path" value: "benchmarking/e2e_test/run_benchmark_summary_v1.py" }
    action_inputs { key: "python_version" value: "3.11" }
    action_inputs { key: "project_path" value: "benchmarking/" }
    action_inputs { key: "extras" value: "test"}
  }
  environment_configs {
    id: "cpu_standard"
    runner_label: "linux-x86-n2-16"
    container_image: "us-docker.pkg.dev/ml-oss-artifacts-published/ml-public-container/ml-build@sha256:f3b96c5ae6ad8e1354693a45f920ea19f28f6bc5d8c5896de20832569c715d00",
    workflow_type: [PRESUBMIT]
  }
  update_frequency_policy: QUARTERLY
  metrics {
    name: "wall_time"
    unit: "ms"
    stats {
      stat: MEAN
      comparison: {
        baseline { value: 100.0 }
        threshold { value: 0.1 }
        improvement_direction: LESS
      }
    }
    stats {
      stat: P99
    }
  }
}

benchmarks {
  name: "e2e_python_benchmark_summary_v2"
  description: "A test benchmark for a Python-based project using TF 2.x Summary for logging metrics."
  owner: "e2e-test-team"
  workload {
    # Must start with ./ml_actions because of the checkout path
    # in our reusable workflow.
    action: "./ml_actions/benchmarking/actions/workload_executors/python"
    action_inputs { key: "script_path" value: "benchmarking/e2e_test/run_benchmark_summary_v2.py" }
    action_inputs { key: "python_version" value: "3.11" }
    action_inputs { key: "project_path" value: "benchmarking/" }
    action_inputs { key: "extras" value: "test"}
  }
  environment_configs {
    id: "cpu_standard"
    runner_label: "linux-x86-n2-16"
    container_image: "us-docker.pkg.dev/ml-oss-artifacts-published/ml-public-container/ml-build@sha256:f3b96c5ae6ad8e1354693a45f920ea19f28f6bc5d8c5896de20832569c715d00",
    workflow_type: [PRESUBMIT]
  }
  update_frequency_policy: QUARTERLY
  metrics {
    name: "wall_time"
    unit: "ms"
    stats {
      stat: MEAN
      comparison: {
        baseline { value: 100.0 }
        threshold { value: 0.1 }
        improvement_direction: LESS
      }
    }
    stats {
      stat: P99
    }
  }
}

benchmarks {
  name: "e2e_python_benchmark_tensorboardx"
  description: "A test benchmark for a Python-based project using tensorboardX for logging metrics."
  owner: "e2e-test-team"
  workload {
    # Must start with ./ml_actions because of the checkout path
    # in our reusable workflow.
    action: "./ml_actions/benchmarking/actions/workload_executors/python"
    action_inputs { key: "script_path" value: "benchmarking/e2e_test/run_benchmark_tensorboardx.py" }
    action_inputs { key: "python_version" value: "3.11" }
    action_inputs { key: "project_path" value: "benchmarking/" }
    action_inputs { key: "extras" value: "test"}
  }
  environment_configs {
    id: "cpu_standard"
    runner_label: "linux-x86-n2-16"
    container_image: "us-docker.pkg.dev/ml-oss-artifacts-published/ml-public-container/ml-build@sha256:f3b96c5ae6ad8e1354693a45f920ea19f28f6bc5d8c5896de20832569c715d00",
    workflow_type: [PRESUBMIT]
  }
  update_frequency_policy: QUARTERLY
  metrics {
    name: "wall_time"
    unit: "ms"
    stats {
      stat: MEAN
      comparison: {
        baseline { value: 100.0 }
        threshold { value: 0.1 }
        improvement_direction: LESS
      }
    }
    stats {
      stat: P99
    }
  }
}

benchmarks {
  name: "e2e_bazel_benchmark"
  description: "A test benchmark for a Bazel workload."
  owner: "e2e-test-team"
  workload {
    # Must start with ./ml_actions because of the checkout path
    # in our reusable workflow.
    action: "./ml_actions/benchmarking/actions/workload_executors/bazel"
    action_inputs { key: "target" value: "//benchmarking/e2e_test:test_benchmark_summary_v2" }
  }
  environment_configs {
    id: "cpu_standard"
    runner_label: "linux-x86-n2-16"
    container_image: "us-docker.pkg.dev/ml-oss-artifacts-published/ml-public-container/ml-build@sha256:f3b96c5ae6ad8e1354693a45f920ea19f28f6bc5d8c5896de20832569c715d00",
    workflow_type: [PRESUBMIT]
  }
  update_frequency_policy: QUARTERLY
  metrics {
    name: "wall_time"
    unit: "ms"
    stats {
      stat: MEAN
      comparison: {
        baseline { value: 100.0 }
        threshold { value: 0.1 }
        improvement_direction: LESS
      }
    }
    stats {
      stat: P90
    }
  }
}
